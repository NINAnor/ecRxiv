---
title: "Temperate deciduous trees by share of forest area in the nemoral and boreonemoral zones"
subtitle: |
  [NO_TDTA_001]
indicatorID: 
  - NO_TDTA_001
indicatorName: 
  - Temperate deciduous trees by share of forest area in the nemoral and boreonemoral zones
folderName: NO_TDTA_001
country: Norway
continent: Europe
ECT: B1 Biotic compositional characteristic
Realm: 
  - Terrestrial (T)
Biome: 
  - T2 Temperate-boreal forests and woodlands biome
Ecosystem: 
  - T2.1 Boreal/montane forests
yearAdded: 2024 # the year when the indicator was first submitted to ecRxiv
yearLastUpdate: 2025
status: incomplete # options are complete, incomplete, or deprecated
Version: "000.001" # Beta-versions are numbers incrementally with values below 0. Operational versions can be given the version numbers above 0. Use this terms similar as for software versioning,
VersionComment: Initial version # Describe briefly how this version differs from earlier versions 
url: https://github.com/NINAnor/ecRxiv/tree/main/indicators/NO_TDTA_001
# Leave the url as is, but replace XX_YYYY_ZZ with the name of the root folder for the current indicator(s). It should be the same as the indicatorID, but if there are more indicator IDs presented in the same folder, the folder name might be different, e.g. XX_YYYY_AAA-BBB 
Normalised: No # Yes or no depending on whether the metric has been normliased or not.
SpatialAggregationPathway: Aggregate # e.g. Scale - Transform - Aggregate (length-weighted arithmetic mean) - Truncate
format: 
  html:
    embed-resources: true
    code-fold: true
    toc: true
    toc-title: Contents
    toc-depth: 3
    smooth-scroll: true
execute: 
  cache: true
  eval: false
author:
  - name: Erik Framstad
    email: erik.framstad@nina.no
    affiliations:
      - name: Norwegian Institute for Nature Research
  - name: Ken Olav Storaunet
    affiliations:
      - name: Norwegian Institute of Bioeconomy Research
  - name: Aud Helen Halbritter
    affiliations:
      - name: University of Bergen
AuthorList: Framstad, E., Storaunet, K. O. and Halbritter, A. H.
date: November 8, 2025
data_availability: none
code_reproducibility: silver
open_science_badge: none
callout-icon: false
lightbox: true
css: ../../../style.css
bibliography: bibliography.bib
code-links:
      - text: Add a review
        icon: github
        href: https://github.com/NINAnor/ecRxiv
hide: FALSE
---

<!--# This is a template for how to document the indicator analyses. Make sure also to not change the order, or modify, the headers, unless you really need to. This is because it easier to read if all the indicators are presented using the same layout. If there is one header where you don't have anything to write, just leave the header as is, and don't write anything below it. If you are providing code, be careful to annotate and comment on every step in the analysis. Before starting it is recommended to fill in as much as you can in the metadata file. This file will populate the initial table in your output.-->

<!--# Load all you dependencies here -->

```{r setup}
#| include: false
#| cache: false
#| eval: true
library(knitr)
library(tidyverse)
library(kableExtra)
library(here)
library(anybadger)
library(yaml)
library(tibble)
library(conflicted)
library(janitor)
library(stringi)
library(DT)
# weird workarounds for cache issues
conflicts_prefer(dplyr::filter)
conflicts_prefer(dplyr::lag)
conflicts_prefer(dplyr::select)
pull<-dplyr::pull

knitr::opts_chunk$set(echo = TRUE)
```

```{r source}
#| echo: false
#| cache: false
#| eval: true
source(here::here("_common.R"))
source(here("indicators/NO_TDTA_001/R/functions.R"))
source(here::here("extract_yaml.R"))

```


<!--# The following parts are autogenerated. Do not edit. -->

::: {layout-ncol="5"}

```{r statusBadge}
#| echo: false
#| eval: true
status_badge(as.character(st))
```

```{r versionBadge}
#| echo: false
#| eval: true
version_badge(my_version_number = version[[1]],
  folder_name = folder_name)
```

```{r dataBadge}
#| echo: false
#| eval: true
data_badge(as.character(badges[[1]]))
```

```{r codeBadge}
#| echo: false
#| eval: true
code_badge(as.character(badges[[2]]))
```

```{r openScienceBadge}
#| echo: false
#| eval: true
open_science_badge(as.character(badges[[3]]))
```

::: 
 

> **Recommended citation**: `r paste(auth, " ", year, ". ", name, " (ID: ", id, ") ", "v. ", version, ". ecRxiv: ", url, sep="")`



::: {.callout-tip collapse="true"}
## Metadata
```{r tbl-meta2}
#| tbl-cap: 'Indicator metadata'
#| echo: false
#| warning: false
meta |>
  dplyr::filter(Variable %in% c(
    "Indicator ID",
    "Indicator Name",
    "Continent",
    "Country",
    "Ecosystem Condition Typology Class", 
    "Realm",
    "Biome",
    "Ecosystem",
    "Year added", 
    "Last update",
    "Version",
    "Version comment",
    "Normalised",
    "Spatial aggregation pathway")) |>   
  kable()

```
:::

::: {.callout-tip collapse="true"}

## Log

<!--# Update this logg with short messages for each update -->
- 08 Nov. 2025 - Original PR
:::


<hr />

<!--# Document you work below.  -->

## 1. Summary

1. **Background and rationale**:
This indicator represents the share of forest area in the nemoral and boreonemoral bioclimate zones that has a substantial share (≥30%) of temperate deciduous tree species (of the genera Acer, Fagus, Fraxinus, Quercus, Tilia, Ulmus, as well as *Alnus glutinosa*).
Temperate deciduous trees are important habitat or substrate for a wide range of fungi and insects, as well as other species.
The main current distribution of temperate deciduous trees is in the nemoral and boreonemoral zones with a mild climate, largely reflecting the general climate of the last 50 or more years.
In forests shaped by natural disturbances and succession, temperate deciduous trees should constitute an increasing proportion of the forest area in response to climate change.
Forestry with an emphasis on spruce (*Picea abies*) and land use change have reduced the proportion of forests dominated by temperate deciduous trees.

2. **Methods**:
Data for this indicator come from the National Forest Inventory (NFI).
The frequency of temperate deciduous trees has been recorded for NFI plots since 2000 according to current methods [@viken2021-feltinstruks].
Here we include only NFI plots in the nemoral and boreonemoral zones.

3. **Interpretation**:
The proportion of forest dominated by temperate deciduous trees may be compared to a reference value for all forest in the nemoral and boreonemoral zones, based on expert assessments supported by empirical data for near-natural forests and knowledge of ecosystem dynamics in intact forest ecosystems.
Such reference values have not yet been determined for this indicator.

4. **Results and development needs**:
Otherwise, the indicator is ready for use as a non-scaled variable.
The indicator should not be used at finer spatial resolution than regions within the nemoral and boreonemoral zones.



## 2. About the underlying data

The frequency and volume of temperate deciduous trees are recorded for each 250 m^2^ NFI inventory plot [@viken2021-feltinstruks].
Here we only include NFI plots in the nemoral and boreonemoral zones, where temperate deciduous trees have their main distribution.
There are about 1760 NFI plots in forest ecosystems in the nemoral and boreonemoral zones, distributed on a regular 3x3 km grid.
The indicator value is an unbiased area-weighted estimate of the proportion of forest dominated by temperate deciduous trees (quantified as the NFI variables `eik_pr` and `edellauv_pr`) for included NFI plots in any selected region.
All NFI plots are sampled over a 5-year period, with a representative sampling scheme every year, allowing unbiased estimates from data for each year.
For this indicator data from each full inventory cycle of 5 years are used, starting in 2010, meaning that results reported for 2024 are based on data from the years 2020-2024.

### 2.1 Spatial and temporal resolution and extent

Data are available from 2000, when current recording methods for the variables `eik_pr` and `edellauv_pr` were established.
Annual estimates are possible due to representative sampling every year. For this indicator all data from each full inventory cycle of 5 years are used, starting in 2010. The data are representative for the forest land within the nemoral and boreonemoral zones of Norway. Spatial resolution should be limited to regions within the nemoral and boreonemoral zones.

### 2.2 Sampling design

All trees larger than 5 cm at breast height (dbh) are recorded and identified to species for each 250 m² NFI inventory plot in the nemoral and boreonemoral zones [@viken2021-feltinstruks].
There are about 1760 NFI plots in forest ecosystems in the nemoral and boreonemoral zones, distributed on a regular 3x3 km grid.
All NFI plots are sampled over a 5-year period, with a representative sampling scheme every year, allowing unbiased estimates from data for each year.

### 2.3 Original units

The indicator is specified as the share (%) of forest area dominated by temperate deciduous trees.

### 2.3 Instructions for citing, using and accessing data

The data used for this indicator have been made available by the Norwegian National Forest Inventory under a specific data use agreement of 2025-10-20, between NIBIO and the specified users.
Further use of these data requires a separate data user agreement with NIBIO.

### 2.4 Additional comments about the dataset

None

## 3. Indicator properties

### 3.1 Ecosystem Condition Typology Class (ECT)

The indicator represents the share of forest dominated by temperate deciduous trees, i.e., tree species associated with particularly high species richness.
Hence, this indicator represents a B2 Biotic structural characteristic.

### 3.1.1 Other condition typologies

None

### 3.2 Ecosystem condition characteristic

The indicator represents the share of forest dominated by temperate deciduous trees, i.e., tree species associated with particularly high species richness.
The indicator is characterised as Functionally important species and biophysical structures.

### 3.3 Collinearities with other indicators

There are no apparent correlations with other indicators.

### 3.4 Impact factors

Natural disturbances at various temporal and spatial scales will contribute to the establishment and dominance of some of the temperate deciduous trees, whereas others depend on more stable environments.
 High populations of wild ungulates will limit recruitment of most temperate deciduous trees.
 Natural climate variability will affect the viability of the various species.
 Forestry practices like clear-cutting and dense planting of spruce will reduce the proportion of old temperate deciduous trees.
 As deciduous trees are often located in the southern, more densely populated lowlands of Norway, other human activities are a clear threat.
 Human-induced climate change is likely to expand the distribution and dominance of temperate deciduous trees.

### 3.5 Spatial aggregation



## 4. Reference condition and levels

### 4.1 Reference condition

The reference condition is considered to be intact forest ecosystems in the nemoral and boreonemoral zones, where effects of human activities are clearly subordinate to those of natural ecosystem processes and disturbances. 

### 4.2 Reference levels

An upper reference value (X100) has not yet been determined.
It would likely be based on expert assessments supported by information on (1) the distribution and frequency of temperate deciduous trees in NFI plots assessed to be little affected by recent human activities, (2) the distribution of other dominating tree species in various regions/counties, and (3) general assessments of natural forest dynamics and the effects on temperate deciduous trees.
Reference values would be expert assessments without estimated uncertainty.
The lower reference value (X0) is set to 0%.
For lack of better knowledge, the relationship between indicator values and ecosystem condition is assumed to be linear for values between X100 and X0.
Hence, indicator values are scaled between 0 and 1 based on a linear scaling function between X0 and X100; in principle, scaled indicator values above 1 are truncated to 1.


#### 4.2.1 Spatial resolution and validity

The reference value will be given as an overall aggregated value for the share of forest dominated by temperate deciduous trees for larger areas, such as counties, within the nemoral and boreonemoral zones.
Although indicator values from NFI plots may technically be aggregated at finer spatial units than counties, scaling indicator values at such finer spatial levels may result in biases.

## 5. Uncertainties

### 5.1 General uncertainties

Uncertainties relate to the variability in the values of the variables `eik_pr` and `edellauv_pr` among NFI plots and its quantification for each NFI plot.
This uncertainty is quantified by bootstrapping.
There will also be uncertainty related to the setting of the upper reference value and to the shape of the relationship between indicator values and ecosystem condition.
These uncertainties are not quantified.

### 5.2 Reported uncertainties

Uncertainty is quantified by bootstrapping.
The uncertainties reported here are inferential and refer to the uncertainty around the point estimates, reflecting spatial variation among NFI plots and recording errors.


## 6. References

::: {#refs}
:::

## 7. Import and prepare datasets

### 7.1 Dataset volume of temperate deciduous trees

The frequency and volume of temperate deciduous trees are recorded for each 250 m^2^ NFI inventory plot [@viken2021-feltinstruks].
Here we only include NFI plots in the nemoral and boreonemoral zones, where temperate deciduous trees have their main distribution. There are about 1760 NFI plots in forest ecosystems in the nemoral and boreonemoral zones, distributed on a regular 3x3 km grid.
The indicator value is an unbiased area-weighted estimate of the proportion of forest dominated by temperate deciduous trees (quantified as the NFI variables `eik_pr` and `edellauv_pr`) for included NFI plots in any selected region.
All NFI plots are sampled over a 5-year period, with a representative sampling scheme every year, allowing unbiased estimates from data for each year.
For this indicator data from each full inventory cycle of 5 years are used, starting in 2010, meaning that results reported for 2024 are based on data from the years 2020-2024.

```{r load-data}

# Load main data file
lsk_data_raw <- read_csv(here("indicators/NO_TDTA_001/data/LSK_data_naturregnskap.csv"), 
                     show_col_types = FALSE,
                     locale = locale(encoding = "UTF-8")) |>
  clean_names()

```

## 8. Spatial units

Aggregated indicator values should not be applied for spatial units finer than those that allow reliable estimates, probably counties (i.e., de facto Ecosystem Assets).

## 9. Analyses

### 9.1 Prepare data and create derived variables

This section prepares the NFI plot data for calculating the indicator.
We retain both productive and unproductive forest plots (`arealtype` 1 and 12) located in the nemoral and boreonemoral vegetation zones (`veg_sone_ko` in `c("nemoral", "boreonemoral")`), and then create the derived variables used in subsequent aggregation steps.

First we define the 5-year reporting periods that match the temporal structure of the indicator.

```{r reporting-periods}

# Define multiple 5-year reporting periods starting from 2010
reporting_periods <- list(
  "2010-2014" = 2010:2014,
  "2015-2019" = 2015:2019,
  "2020-2024" = 2020:2024
)

```

Next we filter the raw dataset to include only nemoral and boreonemoral plots and the two relevant forest area types, standardise the geography fields, and compute the share of temperate deciduous trees as the capped sum of `edellauv_pr` and `eik_pr` (maximum 100).
We then create a dummy variable (`indicator_continuous`) that is 1 if the share of temperate deciduous trees is at least 30%, and 0 otherwise.
Plots with missing values for `edellauv_pr` or `eik_pr` are assigned NA for the indicator.
We multiply the indicator by `au_areal` to obtain an area-weighted dummy per plot and aggregate over all BN + NE plots.
Dividing the sum of the weighted dummy (excluding NAs) by the total `au_areal` for all nemoral and boreonemoral plots (including those with NA indicator values) yields the proportion of forest area with at least 30% temperate deciduous trees.

```{r create-derived-variables}
#| cache: false

lsk_data <- lsk_data_raw |>
  mutate(
    vegsone_clean = stringr::str_to_lower(trimws(veg_sone_ko))
  ) |>
  filter(
    vegsone_clean %in% c("boreonemoral", "nemoral"),
    arealtype %in% c(1, 12)
  ) |>
  mutate(
    fylke_name = region_fylke |>
      stringr::str_remove("^\\d+-\\d+\\s+") |>
      stringr::str_remove("^\\d+\\s*") |>
      stringr::str_squish(),
    fylke_name = normalize_county_parts(fylke_name),
    fylke_name_clean = stringi::stri_trans_general(
      stringr::str_squish(
        tolower(stringr::str_replace_all(fylke_name, "[0-9.-]", " "))
      ),
      "Latin-ASCII"
    ),
    region_code = assign_region_code(fylke_name_clean),
    region_name = assign_region_name(region_code),
    # Calculate total temperate deciduous share (capped at 100)
    # Will be NA if either edellauv_pr or eik_pr is NA
    temperate_deciduous_share = case_when(
      is.na(edellauv_pr) | is.na(eik_pr) ~ NA_real_,
      TRUE ~ pmin(edellauv_pr + eik_pr, 100)
    ),
    # Binary indicator: 1 if share >= 30%, NA if share is NA, 0 otherwise
    indicator_continuous = case_when(
      is.na(temperate_deciduous_share) ~ NA_real_,
      temperate_deciduous_share >= 30 ~ 1,
      TRUE ~ 0
    ),
    # Area-weighted dummy for aggregation to proportion of area
    # Will be NA if indicator_continuous is NA
    indicator_continuous_weighted = indicator_continuous * au_areal
  )

```

Finally, we retain only the columns required for subsequent aggregation and reporting.

```{r select-downstream-fields}

lsk_data <- lsk_data |>
  dplyr::select(
    sesong,
    au_areal,
    arealtype,
    veg_sone_ko,
    region_code,
    region_name,
    fylke_name,
    fylke_name_clean,
    edellauv_pr,
    eik_pr,
    temperate_deciduous_share,
    indicator_continuous,
    indicator_continuous_weighted
  )

```


### 9.2 Calculate non-scaled area-weighted indicator values

With the indicator-specific values added we produce area-weighted summaries for each reporting period at county, region, and national scales.

```{r calculate-tdta-all-periods}

tdta_results <- purrr::imap(
  reporting_periods,
  ~ calculate_period_indicators(lsk_data, .y, .x)
) |>
  purrr::compact()

tdta_results_county_all_periods <- purrr::map_dfr(tdta_results, "county")
tdta_results_region_all_periods <- purrr::map_dfr(tdta_results, "region")
tdta_results_national_all_periods <- purrr::map_dfr(tdta_results, "national")

```


### 9.3 Bootstrap uncertainty estimation for non-scaled indicator values

Uncertainty in the non-scaled indicator estimates is quantified using bootstrapping.
For each 5-year period we resample the plot dataset, calculate area-weighted indicator values, and summarise the distribution for counties, regions, and the national aggregate.

```{r bootstrap-tdta-all-periods}

tdta_bootstrap <- tdta_results |>
  purrr::imap(
    ~ list(
      period = .y,
      data = .x$data,
      county = .x$county,
      region = .x$region,
      national = .x$national,
      national_boot = bootstrap_indicator(.x$data, n_bootstrap = 1000),
      county_boot = purrr::map(
        split(.x$data, .x$data$fylke_name),
        ~ bootstrap_indicator(.x, n_bootstrap = 1000)
      ),
      region_boot = purrr::map(
        split(.x$data, .x$data$region_code),
        ~ bootstrap_indicator(.x, n_bootstrap = 1000)
      ),
      national_scaled_boot = bootstrap_national_scaled_agg(.x$data, x0 = 0, x100 = 100, n_bootstrap = 1000),
      region_scaled_boot = bootstrap_region_scaled_agg(.x$data, x0 = 0, x100 = 100, n_bootstrap = 1000)
    )
  )

tdta_results_county_non_scaled_uncertainty <- purrr::map_dfr(
  tdta_bootstrap,
  ~ {
    county_summary <- purrr::imap_dfr(
      .x$county_boot,
      function(boot, county_name) {
        dplyr::tibble(
          fylke_name = county_name,
          indicator_value = boot$median,
          mean = boot$mean,
          se = boot$se,
          ci_lower = boot$ci_lower,
          ci_upper = boot$ci_upper,
          q1 = boot$q1,
          median = boot$median,
          q3 = boot$q3
        )
      }
    )

    .x$county |>
      dplyr::select(fylke_name, period, total_area, n_plots) |>
      dplyr::left_join(county_summary, by = "fylke_name")
  }
)

tdta_results_region_non_scaled_uncertainty <- purrr::map_dfr(
  tdta_bootstrap,
  ~ {
    region_summary <- purrr::imap_dfr(
      .x$region_boot,
      function(boot, region_code) {
        dplyr::tibble(
          region_code = region_code,
          indicator_value = boot$median,
          mean = boot$mean,
          se = boot$se,
          ci_lower = boot$ci_lower,
          ci_upper = boot$ci_upper,
          q1 = boot$q1,
          median = boot$median,
          q3 = boot$q3
        )
      }
    )

    .x$region |>
      dplyr::select(region_code, period, total_area, n_plots) |>
      dplyr::left_join(region_summary, by = "region_code")
  }
)

tdta_results_national_non_scaled_uncertainty <- purrr::map_dfr(
  tdta_bootstrap,
  ~ .x$national |>
    dplyr::mutate(
      indicator_value = .x$national_boot$median,
      mean = .x$national_boot$mean,
      se = .x$national_boot$se,
      ci_lower = .x$national_boot$ci_lower,
      ci_upper = .x$national_boot$ci_upper,
      q1 = .x$national_boot$q1,
      median = .x$national_boot$median,
      q3 = .x$national_boot$q3
    )
)

```


## 10. Results

The tables below present the non-scaled indicator values expressed as percentages (0-100%) representing the area-weighted proportion of forest area with at least 30% temperate deciduous trees, together with bootstrap-derived uncertainty summaries for each 5-year reporting period.

### 10.1 County-level results (non-scaled with uncertainty)

```{r tbl-tdta-county-results}
#| tbl-cap: 'County-level non-scaled TDTA indicator values by reporting period. Values are expressed as percentages (0-100%) representing the area-weighted proportion of forest area with at least 30% temperate deciduous trees. Columns include the bootstrap mean and median, standard error (SE), 95% confidence interval (CI Lower, CI Upper), and quartiles (Q1, Q3).'
#| echo: false

tdta_county_results <- tdta_results_county_non_scaled_uncertainty |>
  dplyr::mutate(
    indicator_value = round(indicator_value * 100, 2),
    mean = round(mean * 100, 2),
    se = round(se * 100, 2),
    ci_lower = round(ci_lower * 100, 2),
    ci_upper = round(ci_upper * 100, 2),
    q1 = round(q1 * 100, 2),
    median = round(median * 100, 2),
    q3 = round(q3 * 100, 2),
    total_area = round(total_area, 0)
  ) |>
  dplyr::rename(
    Period = period,
    County = fylke_name,
    `Bootstrapped (mean)` = mean,
    `Bootstrapped (median)` = median,
    `Standard Error` = se,
    `CI Lower` = ci_lower,
    `CI Upper` = ci_upper,
    `Q1` = q1,
    `Q3` = q3,
    `Total Area (ha)` = total_area,
    `Number of Plots` = n_plots
  ) |>
  dplyr::select(
    Period,
    County,
    `Bootstrapped (mean)`,
    `Bootstrapped (median)`,
    `Standard Error`,
    `CI Lower`,
    `CI Upper`,
    `Q1`,
    `Q3`,
    `Total Area (ha)`,
    `Number of Plots`
  )

DT::datatable(
  tdta_county_results,
  rownames = FALSE,
  options = list(pageLength = 10, scrollX = TRUE, lengthMenu = c(10, 25, 50, 100))
)
```

### 10.2 Regional results (non-scaled with uncertainty)

```{r tbl-tdta-region-results}
#| tbl-cap: 'Regional-level non-scaled TDTA indicator values by reporting period. Values are expressed as percentages (0-100%) representing the area-weighted proportion of forest area with at least 30% temperate deciduous trees. Columns include the bootstrap mean and median, standard error (SE), 95% confidence interval (CI Lower, CI Upper), and quartiles (Q1, Q3).'
#| echo: false

tdta_region_results <- tdta_results_region_non_scaled_uncertainty |>
  dplyr::mutate(region_name = assign_region_name(region_code)) |>
  dplyr::mutate(
    indicator_value = round(indicator_value * 100, 2),
    mean = round((mean %||% NA_real_) * 100, 2),
    se = round((se %||% NA_real_) * 100, 2),
    ci_lower = round((ci_lower %||% NA_real_) * 100, 2),
    ci_upper = round((ci_upper %||% NA_real_) * 100, 2),
    q1 = round((q1 %||% NA_real_) * 100, 2),
    median = round((median %||% NA_real_) * 100, 2),
    q3 = round((q3 %||% NA_real_) * 100, 2),
    total_area = round(total_area, 0)
  ) |>
  dplyr::rename(
    Period = period,
    `Region Code` = region_code,
    Region = region_name,
    `Bootstrapped (mean)` = mean,
    `Bootstrapped (median)` = median,
    `Standard Error` = se,
    `CI Lower` = ci_lower,
    `CI Upper` = ci_upper,
    `Q1` = q1,
    `Q3` = q3,
    `Total Area (ha)` = total_area,
    `Number of Plots` = n_plots
  ) |>
  dplyr::select(
    Period,
    `Region Code`,
    Region,
    `Bootstrapped (mean)`,
    `Bootstrapped (median)`,
    `Standard Error`,
    `CI Lower`,
    `CI Upper`,
    `Q1`,
    `Q3`,
    `Total Area (ha)`,
    `Number of Plots`
  )

tdta_region_results |>
  kable() |>
  kable_styling(bootstrap_options = c("striped", "hover", "condensed", "responsive"))
```

![](../img/TDTA_regional.jpg)


### 10.3 National results (non-scaled with uncertainty)

```{r tbl-tdta-national-results}
#| tbl-cap: 'National-level non-scaled TDTA indicator values by reporting period. Values are expressed as percentages (0-100%) representing the area-weighted proportion of forest area with at least 30% temperate deciduous trees. Columns include the bootstrap mean and median, standard error (SE), 95% confidence interval (CI Lower, CI Upper), and quartiles (Q1, Q3).'
#| echo: false

tdta_national_results <- tdta_results_national_non_scaled_uncertainty |>
  dplyr::mutate(
    indicator_value = round(indicator_value * 100, 2),
    mean = round(mean * 100, 2),
    se = round(se * 100, 2),
    ci_lower = round(ci_lower * 100, 2),
    ci_upper = round(ci_upper * 100, 2),
    q1 = round(q1 * 100, 2),
    median = round(median * 100, 2),
    q3 = round(q3 * 100, 2),
    total_area = round(total_area, 0)
  ) |>
  dplyr::rename(
    Period = period,
    `Bootstrapped (mean)` = mean,
    `Bootstrapped (median)` = median,
    `Standard Error` = se,
    `CI Lower` = ci_lower,
    `CI Upper` = ci_upper,
    `Q1` = q1,
    `Q3` = q3,
    `Total Area (ha)` = total_area,
    `Number of Plots` = n_plots
  ) |>
  dplyr::select(
    Period,
    `Bootstrapped (mean)`,
    `Bootstrapped (median)`,
    `Standard Error`,
    `CI Lower`,
    `CI Upper`,
    `Q1`,
    `Q3`,
    `Total Area (ha)`,
    `Number of Plots`
  )

tdta_national_results |>
  kable() |>
  kable_styling(bootstrap_options = c("striped", "hover", "condensed", "responsive"))
```

![](../img/TDTA_national.jpg)
```{r export}
#| eval: false
```

<!-- You can leave this last part as it is, unless you have a good reason to alter it. -->

::: {.callout-tip collapse="true"}
## Session Info

This information is mainly aimed at developers that need to recreate the R environment that produced the html.
Important note: this information is about the R session that was running when the html was rendered, and if some of the code chunks were not evaluated when the html was rendered, they may have been executed in a different environment.  

```{r sessionInfo}
#| echo: false
sessionInfo()
```

:::
